FROM python:3.10-slim

ARG SERVICE

COPY ./$SERVICE /src/$SERVICE
COPY ./$GOOGLE_APPLICATION_CREDENTIALS $GOOGLE_APPLICATION_CREDENTIALS
ENV GOOGLE_APPLICATION_CREDENTIALS=$GOOGLE_APPLICATION_CREDENTIALS
WORKDIR /src/$SERVICE
ENV PYTHONPATH=/src/$SERVICE

RUN pip install --user -r /src/$SERVICE/requirements.txt

ENTRYPOINT ["python", "main.py"]
